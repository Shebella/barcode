/*
 * Copyright 2017 Rakuten, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

#import <XCTest/XCTest.h>
#import <CoreGraphics/CoreGraphics.h>
#import <UIKit/UIKit.h>
#import <RBarcode/RBarcode.h>

static const unsigned int kBufferSize = 1024;

@interface Code128RenderingTests : XCTestCase {
    char _buffer[kBufferSize];
}
@end

@implementation Code128RenderingTests

- (void)commonTestRenderingWithPayload:(NSString *)payload
                              patterns:(const char*)patterns
                                 count:(NSUInteger)count
                             base64PNG:(NSString *)base64PNG
{
    unsigned int expectedDotWidth = 0;
    for (int index = 0; index < (int) count; ++index)
    {
        expectedDotWidth += (unsigned int) patterns[index];
    }

    RBCCode128Barcode *barcode = [RBCCode128Barcode.alloc initWithPayload:payload];
    XCTAssertNotNil(barcode);
    XCTAssertEqual(barcode.minimumSize.width,  (CGFloat) expectedDotWidth);
    XCTAssertEqual(barcode.minimumSize.height, (CGFloat) 2);

    CGRect rect = CGRectMake(0, 0, expectedDotWidth, (expectedDotWidth * 3) / 4);
    UIGraphicsBeginImageContext(rect.size);
    CGContextRef context = UIGraphicsGetCurrentContext();
    XCTAssert(context);

    CGContextSetAllowsAntialiasing(context, NO);

    CGContextSetRGBFillColor(context, 1, 1, 1, 1);
    CGContextFillRect(context, rect);

    CGContextSetRGBFillColor(context, 0, 0, 0, 1);
    [barcode drawInRect:rect context:context];

    UIImage *image = UIGraphicsGetImageFromCurrentImageContext();
    XCTAssertNotNil(image);
    UIGraphicsEndImageContext();

    NSData *data = UIImagePNGRepresentation(image);
    XCTAssertNotNil(data);

    NSString *s = [data base64EncodedStringWithOptions:0];
    XCTAssertNotNil(s);
    XCTAssertEqualObjects(s, base64PNG);
}

- (void)testRRendering
{
    const char patterns[] = {2,1,1,2,1,4,2,3,1,1,3,1,2,1,3,1,1,3,2,3,3,1,1,1,2};
    [self commonTestRenderingWithPayload:@"R"
                                patterns:patterns
                                   count:sizeof(patterns)
                               base64PNG:@"iVBORw0KGgoAAAANSUhEUgAAAC4AAAAiCAYAAAAge+tMAAAAAXNSR0IArs4c6QAAABxpRE9UAAAAAgAAAAAAAAARAAAAKAAAABEAAAARAAAAvmEYk6AAAACKSURBVFgJ7NFBCoBADEPR3v/Soy4axPws3GdAHNIS5Dkzc77Puc9mz33PZs97zzv7e6cOykJvP1x/KQjZnHQpC30VN9EgpT3SpSz0VFySQcjmpEtZ6Ku4iQYp7ZEuZaGn4pIMQjYnXcpCX8VNNEhpj3QpCz0Vl2QQsjnpUhb6Km6iQUp7pEsZ9VwAAAD//5pSQMQAAACHSURBVO3RQQqAQAxD0d7/0qMuGsT8LNxnQBzSEuQ5M3O+z7nPZs99z2bPe887+3unDspCbz9cfykI2Zx0KQt9FTfRIKU90qUs9FRckkHI5qRLWeiruIkGKe2RLmWhp+KSDEI2J13KQl/FTTRIaY90KQs9FZdkELI56VIW+ipuokFKe6RLGfVcfaUOf4Fri5IAAAAASUVORK5CYII="];
}

- (void)test20Rendering
{
    const char patterns[] = {2,1,1,2,3,2,2,2,1,2,3,1,2,2,3,1,1,2,2,3,3,1,1,1,2};
    [self commonTestRenderingWithPayload:@"20"
                                patterns:patterns
                                   count:sizeof(patterns)
                               base64PNG:@"iVBORw0KGgoAAAANSUhEUgAAAC4AAAAiCAYAAAAge+tMAAAAAXNSR0IArs4c6QAAABxpRE9UAAAAAgAAAAAAAAARAAAAKAAAABEAAAARAAAA1bt4K3AAAAChSURBVFgJ7JIBCsAwCAP7/09vWgiEw2wfcDDjEi3j6DnnPHyfev48n/Gee/39lTO7w1Wmc+Dtj0dKpOrkmC1x0ZnIpEy+lLvyW5ldo4rPhH7veKREqk6Q2RIXnYlMyuRLuSu/ldk1qvhM6PeOR0qk6gSZLXHRmcikTL6Uu/JbmV2jis+Efu94pESqTpDZEhediUzK5Eu5K7+V2TWq+MzUvwAAAP//urDS8wAAAJ5JREFU7ZIBCsAwCAP7/09vWgiEw2wfcDDjEi3j6DnnPHyfev48n/Gee/39lTO7w1Wmc+Dtj0dKpOrkmC1x0ZnIpEy+lLvyW5ldo4rPhH7veKREqk6Q2RIXnYlMyuRLuSu/ldk1qvhM6PeOR0qk6gSZLXHRmcikTL6Uu/JbmV2jis+Efu94pESqTpDZEhediUzK5Eu5K7+V2TWq+MzUvwfuQzxjfZ1OAAAAAElFTkSuQmCC"];
}

- (void)test20RRendering
{
    const char patterns[] = {2,1,1,2,3,2,2,2,1,2,3,1,1,1,4,1,3,1,2,3,1,1,3,1,1,1,1,2,2,4,2,3,3,1,1,1,2};
    [self commonTestRenderingWithPayload:@"20R"
                                patterns:patterns
                                   count:sizeof(patterns)
                               base64PNG:@"iVBORw0KGgoAAAANSUhEUgAAAEQAAAAzCAYAAAAuNK7LAAAAAXNSR0IArs4c6QAAABxpRE9UAAAAAgAAAAAAAAAaAAAAKAAAABoAAAAZAAAA01W0T0MAAACfSURBVGgF7JhLDoAwCES5/6Ur2JqMk+Jn/0g0SEoXLzNYjYgYfo2Mt5qu0dz7/j7XXhVf+3zt2bxuusdV11qTA8TAAAQgmzEhUFCIwKjZBRBjABCAbFwhUFCIwGCGGAyAAOR5fqAQFIJC5luUr90koHYACEDu1ihFoJAcmBoAAchUxE4JWGadL7BMEkAhctrsrNHVFV6T8z/EwABEgRwAAAD//1hjNP4AAACZSURBVO2YSw6AMAhEuf+lK9iajJPiZ/9INEhKFy8zWI2IGH6NjLeartHc+/4+114VX/t87dm8brrHVddakwPEwAAEIJsxIVBQiMCo2QUQYwAQgGxcIVBQiMBghhgMgADkeX6gEBSCQuZblK/dJKB2AAhA7tYoRaCQHJgaAAHIVMROCVhmnS+wTBJAIXLa7KzR1RVek/M/RMEc8OukdbT/n6QAAAAASUVORK5CYII="];
}

- (void)testR20Rendering
{
    const char patterns[] = {2,1,1,2,1,4,2,3,1,1,3,1,2,2,3,2,1,1,1,2,3,1,2,2,2,3,2,1,2,1,2,3,3,1,1,1,2};
    [self commonTestRenderingWithPayload:@"R20"
                                patterns:patterns
                                   count:sizeof(patterns)
                               base64PNG:@"iVBORw0KGgoAAAANSUhEUgAAAEQAAAAzCAYAAAAuNK7LAAAAAXNSR0IArs4c6QAAABxpRE9UAAAAAgAAAAAAAAAaAAAAKAAAABoAAAAZAAAA53QAu/YAAACzSURBVGgF7JdRCoAwDEN3/0tPgwRCnDr/X2E4u3TII9Y5xhizxzzDOc0dzunqyNzTXNpe281lXdfoXpGap/ml3NICpCACBCCLNhFQcEjAUD8CSDEACEAWb0VAwSEBgx5SMAACkPf+gUNwCA65vqL87ZYTAAKQ+wEzGyYOwSE4xG+BDlOfw+IN7X0zFbvQG2VOaw7r3q5d6/quWelS0+t/n6Hrc++YAyRgcHQvGAAByEcDPgAAAP//uqeyrgAAAK5JREFU7ZdRCoAwDEN3/0tPgwRCnDr/X2E4u3TII9Y5xhizxzzDOc0dzunqyNzTXNpe281lXdfoXpGap/ml3NICpCACBCCLNhFQcEjAUD8CSDEACEAWb0VAwSEBgx5SMAACkPf+gUNwCA65vqL87ZYTAAKQ+wEzGyYOwSE4xG+BDlOfw+IN7X0zFbvQG2VOaw7r3q5d6/quWelS0+t/n6Hrc++YAyRgcHQvGABpIAfO3NVSj7pqGgAAAABJRU5ErkJggg=="];
}

- (void)testSimpleGS1Rendering
{
    // Just a serial shipping container code, [FNC1] 00 12345678 0000000001
    const char patterns[] = {2,1,1,2,3,2,4,1,1,1,3,1,2,1,2,2,2,2,1,1,2,2,3,2,1,3,1,1,2,3,3,3,1,1,2,1,2,4,1,1,1,2,2,1,2,2,2,2,2,1,2,2,2,2,2,1,2,2,2,2,2,1,2,2,2,2,2,2,2,1,2,2,1,3,1,2,2,2,2,3,3,1,1,1,2};
    NSString *fnc1 = [NSString stringWithCString:"\xf1" encoding:NSISOLatin1StringEncoding];
    [self commonTestRenderingWithPayload:[fnc1 stringByAppendingString:@"00123456780000000001"]
                                patterns:patterns
                                   count:sizeof(patterns)
                               base64PNG:@"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"];
}

- (void)testComplexGS1Rendering
{
    // Serial number, production date and expiration date, [FNC1] 21 12345 [FNC1] 11 090101 17 100101
    const char patterns[] = {2,1,1,2,3,2,4,1,1,1,3,1,2,1,3,2,1,2,1,1,2,2,3,2,1,3,1,1,2,3,1,1,4,1,3,1,2,1,3,2,1,2,4,1,1,1,3,1,1,1,3,1,4,1,2,3,1,2,1,2,2,2,1,2,1,3,2,2,2,1,2,2,2,2,2,1,2,2,1,2,3,2,2,1,2,2,1,3,1,2,2,2,2,1,2,2,2,2,2,1,2,2,1,4,1,1,2,2,2,3,3,1,1,1,2};
    NSString *fnc1 = [NSString stringWithCString:"\xf1" encoding:NSISOLatin1StringEncoding];
    [self commonTestRenderingWithPayload:[NSString stringWithFormat:@"%1$@2112345%1$@1109010117100101", fnc1]
                                patterns:patterns
                                   count:sizeof(patterns)
                               base64PNG:@"iVBORw0KGgoAAAANSUhEUgAAANMAAACeCAYAAACowT9rAAAAAXNSR0IArs4c6QAAABxpRE9UAAAAAgAAAAAAAABPAAAAKAAAAE8AAABPAAASGWfeOmkAABHlSURBVHgB7JNRjmUpDEN7/5vuuWYwOrIC6jzxCVLxTGzsVND98+fPn7/59/db/1JLzb+e6U/M+1WdNWEt3jH+n6k5azq/zCHueHS1+T8wl1i+PCfmObXZ06/avNfJ0V0t90Lc8eloR+DcnMvfqoesUQ/8PiYMYz0qaxwkMTW3sXK07LvD4nfcIL7NHqllveLoe9JWuqpmD3LCWhVX9WRdxdGHutSOwLmlLrU+n7zh8T4mDGM9KmscJDE1t/F869UPc4mVy3NinlObPf+qzXudHN3Vci/EHZ+OdgTOzbn8rXrIGvXA72PCMNajssZBElNzGytHy747LH7HDeLb7JFa1iuOvidtpatq9iAnrFVxVU/WVRx9qEvtCJxb6lLr88kbHu9jwjDWo7LGQRJTcxvPt179MJdYuTwn5jm12fOv2rzXydFdLfdC3PHpaEfg3JzL36qHrFEP/D4mDGM9KmscJDE1t7FytOy7w+J33CC+zR6pZb3i6HvSVrqqZg9ywloVV/VkXcXRh7rUjsC5pS61Pp+84fE+JgxjPSprHCQxNbfxfOvVD3OJlctzYp5Tmz3/qs17nRzd1XIvxB2fjnYEzs25/K16yBr1wO9jwjDWo7LGQRJTcxsrR8u+Oyx+xw3i2+yRWtYrjr4nbaWravYgJ6xVcVVP1lUcfahL7QicW+pS6/PJGx7vY8Iw1qOyxkESU3Mbz7de/TCXWLk8J+Y5tdnzr9q818nRXS33Qtzx6WhH4Nycy9+qh6xRD/w+JgxjPSprHCQxNbexcrTsu8Pid9wgvs0eqWW94uh70la6qmYPcsJaFVf1ZF3F0Ye61I7AuaUutT6fvOHxPiYMYz0qaxwkMTW38Xzr1Q9ziZXLc2KeU5s9/6rNe50c3dVyL8Qdn452BM7Nufytesga9cDvY8Iw1qOyxkESU3MbK0fLvjssfscN4tvskVrWK46+J22lq2r2ICesVXFVT9ZVHH2oS+0InFvqUuvzyRse72PCMNajssZBElNzG8+3Xv0wl1i5PCfmObXZ86/avNfJ0V0t90Lc8eloR+DcnMvfqoesUQ/8PiYMYz0qaxwkMTW3sXK07LvD4nfcIL7NHqllveLoe9JWuqpmD3LCWhVX9WRdxdGHutSOwLmlLrU+n7zh8T4mDGM9KmscJDE1t/F869UPc4mVy3NinlObPf+qzXudHN3Vci/EHZ+OdgTOzbn8rXrIGvXA72PCMNajssZBElNzGytHy747LH7HDeLb7JFa1iuOvidtpatq9iAnrFVxVU/WVRx9qEvtCJxb6lLr88kbHu9jwjDWo7LGQRJTcxvPt179MJdYuTwn5jm12fOv2rzXydFdLfdC3PHpaEfg3JzL36qHrFEP/D4mDGM9KmscJDE1t7FytOy7w+J33CC+zR6pZb3i6HvSVrqqZg9ywloVV/VkXcXRh7rUjsC5pS61Pp+84fE+JgxjPSprHCQxNbfxfOvVD3OJlctzYp5Tmz3/qs17nRzd1XIvxB2fjnYEzs25/K16yBr1wO9jwjDWo7LGQRJTcxsrR8u+Oyx+xw3i2+yRWtYrjr4nbaWravYgJ6xVcVVP1lUcfahL7QicW+pS6/PJGx7vY8Iw1qOyxkESU3Mbz7de/TCXWLk8J+Y5tdnzr9q818nRXS33Qtzx6WhH4Nycy9+qh6xRD/w+JgxjPSprHCQxNbexcrTsu8Pid9wgvs0eqWW94uh70la6qmYPcsJaFVf1ZF3F0Ye61I7AuaUutT6fvOHxPiYMYz0qaxwkMTW38Xzr1Q9ziZXLc2KeU5s9/6rNe50c3dVyL8Qdn452BM7Nufytesga9cDvY8Iw1qOyxkESU3MbK0fLvjssfscN4tvskVrWK46+J22lq2r2ICesVXFVT9ZVHH2oS+0InFvqUuvzyRse72PCMNajssZBElNzG8+3Xv0wl1i5PCfmObXZ86/avNfJ0V0t90Lc8eloR+DcnMvfqoesUQ/8PiYMYz0qaxwkMTW3sXK07LvD4nfcIL7NHqllveLoe9JWuqpmD3LCWhVX9WRdxdGHutSOwLmlLrU+n7zh8T4mDGM9KmscJDE1t/F869UPc4mVy3NinlObPf+qzXudHN3Vci/EHZ+OdgTOzbn8rXrIGvXA72PCMNajssZBElNzGytHy747LH7HDeLb7JFa1iuOvidtpatq9iAnrFVxVU/WVRx9qEvtCJxb6lLr88kbHu9jwjDWo7LGQRJTcxvPt179MJdYuTwn5jm12fOv2rzXydFdLfdC3PHpaEfg3JzL36qHrFEP/D4mDGM9KmscJDE1t7FytOy7w+J33CC+zR6pZb3i6HvSVrqqZg9ywloVV/VkXcXRh7rUjsC5pS61Pp+84fE+JgxjPSprHCQxNbfxfOvVD3OJlctzYp5Tmz3/qs17nRzd1XIvxB2fjnYEzs25/K16yBr1wO9jwjDWo7LGQRJTcxsrR8u+Oyx+xw3i2+yRWtYrjr4nbaWravYgJ6xVcVVP1lUcfahL7QicW+pS6/PJGx7vY8Iw1qOyxkESU3Mbz7de/TCXWLk8J+Y5tdnzr9q818nRXS33Qtzx6WhH4Nycy9+qh6xRD/w+JgxjPSprHCQxNbexcrTsu8Pid9wgvs0eqWW94uh70la6qmYPcsJaFVf1ZF3F0Ye61I7AuaUutT6fvOHxPiYMYz0qaxwkMTW38Xzr1Q9ziZXLc2KeU5s9/6rNe50c3dVyL8Qdn452BM7Nufytesga9cDvY8Iw1qOyxkESU3MbK0fLvjssfscN4tvskVrWK46+J22lq2r2ICesVXFVT9ZVHH2oS+0InFvqUuvzyRse72PCMNajssZBElNzG8+3Xv0wl1i5PCfmObXZ86/avNfJ0V0t90Lc8eloR+DcnMvfqoesUQ/8PiYMYz0qaxwkMTW3sXK07LvD4nfcIL7NHqllveLoe9JWuqpmD3LCWhVX9WRdxdGHutSOwLmlLrU+n7zh8T4mDGM9KmscJDE1t/F869UPc4mVy3NinlObPf+qzXudHN3Vci/EHZ+OdgTOzbn8rXrIGvXA72PCMNajssZBElNzGytHy747LH7HDeLb7JFa1iuOvidtpatq9iAnrFVxVU/WVRx9qEvtCJxb6lLr88kbHu9jwjDWo7LGQRJTcxvPt179MJdYuTwn5jm12fOv2rzXydFdLfdC3PHpaEfg3JzL36qHrFEP/D4mDGM9KmscJDE1t7FytOy7w+J33CC+zR6pZb3i6HvSVrqqZg9ywloVV/VkXcXRh7rUjsC5pS61Pp+84fE+JgxjPSprHCQxNbfxfOvVD3OJlctzYp5Tmz3/qs17nRzd1XIvxB2fjnYEzs25/K16yBr1wO9jwjDWo7LGQRJTcxsrR8u+Oyx+xw3i2+yRWtYrjr4nbaWravYgJ6xVcVVP1lUcfahL7QicW+pS6/PJGx7vY8Iw1qOyxkESU3Mbz7de/TCXWLk8J+Y5tdnzr9q818nRXS33Qtzx6WhH4Nycy9+qh6xRD/w+JgxjPSprHCQxNbexcrTsu8Pid9wgvs0eqWW94uh70la6qmYPcsJaFVf1ZF3F0Ye61I7AuaUutT6fvOHxPiYMYz0qaxwkMTW38Xzr1Q9ziZXLc2KeU5s9/6rNe50c3dVyL8Qdn452BM7Nufytesga9cDvY8Iw1qOyxkESU3MbK0fLvjssfscN4tvskVrWK46+J22lq2r2ICesVXFVT9ZVHH2oS+0InFvqUuvzyRse72PCMNajssZBElNzG8+3Xv0wl1i5PCfmObXZ86/avNfJ0V0t90Lc8eloR+DcnMvfqoesUQ/8PiYMYz0qaxwkMTW3sXK07LvD4nfcIL7NHqllveLoe9JWuqpmD3LCWhVX9WRdxdGHutSOwLmlLrU+n7zh8T4mDGM9KmscJDE1t/F869UPc4mVy3NinlObPf+qzXudHN3Vci/EHZ+OdgTOzbn8rXrIGvXA72PCMNajssZBElNzGytHy747LH7HDeLb7JFa1iuOvidtpatq9iAnrFVxVU/WVRx9qEvtCJxb6lLr88kbHu9jwjDWo7LGQRJTcxvPt179MJdYuTwn5jm12fOv2rzXydFdLfdC3PHpaEfg3JzL36qHrFEP/D4mDGM9KmscJDE1t7FytOy7w+J33CC+zR6pZb3i6HvSVrqqZg9ywloVV/VkXcXRh7rUjsC5pS61Pp+84fE+JgxjPSprHCQxNbfxfOvVD3OJlctzYp5Tmz3/qs17nRzd1XIvxB2fjnYEzs25/K16yBr1wO9jwjDWo7LGQRJTcxsrR8u+Oyx+xw3i2+yRWtYrjr4nbaWravYgJ6xVcVVP1lUcfahL7QicW+pS6/PJGx7vY8Iw1qOyxkESU3Mbz7de/TCXWLk8J+Y5tdnzr9q818nRXS33Qtzx6WhH4Nycy9+qh6xRD/w+JgxjPSprHCQxNbexcrTsu8Pid9wgvs0eqWW94uh70la6qmYPcsJaFVf1ZF3F0Ye61I7AuaUutT6fvOHxPiYMYz0qaxwkMTW38Xzr1Q9ziZXLc2KeU5s9/6rNe50c3dVyL8Qdn452BM7Nufytesga9cDvY8Iw1qOyxkESU3MbK0fLvjssfscN4tvskVrWK46+J22lq2r2ICesVXFVT9ZVHH2oS+0InFvqUuvzyRse72PCMNajssZBElNzG8+3Xv0wl1i5PCfmObXZ86/avNfJ0V0t90Lc8eloR+DcnMvfqoesUQ/8PiYMYz0qaxwkMTW3sXK07LvD4nfcIL7NHqllveLoe9JWuqpmD3LCWhVX9WRdxdGHutSOwLmlLrU+n7zh8T4mDGM9KmscJDE1t/F869UPc4mVy3NinlObPf+qzXudHN3Vci/EHZ+OdgTOzbn8rXrIGvXA72PCMNajssZBElNzGytHy747LH7HDeLb7JFa1iuOvidtpatq9iAnrFVxVU/WVRx9qEvtCJxb6lLr88kbHu9jwjDWo7LGQRJTcxvPt179MJdYuTwn5jm12fOv2rzXydFdLfdC3PHpaEfg3JzL36qHrFEP/D4mDGM9KmscJDE1t7FytOy7w+J33CC+zR6pZb3i6HvSVrqqZg9ywloVV/VkXcXRh7rUjsC5pS61Pp+84fE+JgxjPSprHCQxNbfxfOvVD3OJlctzYp5Tmz3/qs17nRzd1XIvxB2fjnYEzs25/K16yBr1wO9jwjDWo7LGQRJTcxsrR8u+Oyx+xw3i2+yRWtYrjr4nbaWravYgJ6xVcVVP1lUcfahL7QicW+pS6/PJGx7vY8Iw1qOyxkESU3Mbz7de/TCXWLk8J+Y5tdnzr9q818nRXS33Qtzx6WhH4Nycy9+qh6xRD/w+JgxjPSprHCQxNbexcrTsu8Pid9wgvs0eqWW94uh70la6qmYPcsJaFVf1ZF3F0Ye61I7AuaUutT6fvOHxPiYMYz0qaxwkMTW38Xzr1Q9ziZXLc2KeU5s9/6rNe50c3dVyL8Qdn452BM7Nufytesga9cDvY8Iw1qOyxkESU3MbK0fLvjssfscN4tvskVrWK46+J22lq2r2ICesVXFVT9ZVHH2oS+0InFvqUuvzyRse72PCMNajssZBElNzG8+3Xv0wl1i5PCfmObXZ86/avNfJ0V0t90Lc8eloR+DcnMvfqoesUQ/8PiYMYz0qaxwkMTW3sXK07LvD4nfcIL7NHqllveLoe9JWuqpmD3LCWhVX9WRdxdGHutSOwLmlLrU+n7zh8T4mDGM9KmscJDE1t/F869UPc4mVy3NinlObPf+qzXudHN3Vci/EHZ+OdgTOzbn8rXrIGvXA72PCMNajssZBElNzGytHy747LH7HDeLb7JFa1iuOvidtpatq9iAnrFVxVU/WVRx9qEvtCJxb6lLr88kbHu9jwjDWo7LGQRJTcxvPt179MJdYuTwn5jm12fOv2rzXydFdLfdC3PHpaEfg3JzL36qHrFEP/D4mDGM9KmscJDE1t7FytOy7w+J33CC+zR6pZb3i6HvSVrqqZg9ywloVV/VkXcXRh7rUjsC5pS61Pp+84fE+JgxjPSprHCQxNbfxfOvVD3OJlctzYp5Tmz3/qs17nRzd1XIvxB2fjnYEzs25/K16yBr1xv8BAAD///Z5Bm4AABHjSURBVO2TUY5lKQxDe/+b7rlmMDqyAuo88QlS8Uxs7FTQ/fPnz5+/+ff3W/9SS82/nulPzPtVnTVhLd4x/p+pOWs6v8wh7nh0tfk/MJdYvjwn5jm12dOv2rzXydFdLfdC3PHpaEfg3JzL36qHrFEP/D4mDGM9KmscJDE1t7FytOy7w+J33CC+zR6pZb3i6HvSVrqqZg9ywloVV/VkXcXRh7rUjsC5pS61Pp+84fE+JgxjPSprHCQxNbfxfOvVD3OJlctzYp5Tmz3/qs17nRzd1XIvxB2fjnYEzs25/K16yBr1wO9jwjDWo7LGQRJTcxsrR8u+Oyx+xw3i2+yRWtYrjr4nbaWravYgJ6xVcVVP1lUcfahL7QicW+pS6/PJGx7vY8Iw1qOyxkESU3Mbz7de/TCXWLk8J+Y5tdnzr9q818nRXS33Qtzx6WhH4Nycy9+qh6xRD/w+JgxjPSprHCQxNbexcrTsu8Pid9wgvs0eqWW94uh70la6qmYPcsJaFVf1ZF3F0Ye61I7AuaUutT6fvOHxPiYMYz0qaxwkMTW38Xzr1Q9ziZXLc2KeU5s9/6rNe50c3dVyL8Qdn452BM7Nufytesga9cDvY8Iw1qOyxkESU3MbK0fLvjssfscN4tvskVrWK46+J22lq2r2ICesVXFVT9ZVHH2oS+0InFvqUuvzyRse72PCMNajssZBElNzG8+3Xv0wl1i5PCfmObXZ86/avNfJ0V0t90Lc8eloR+DcnMvfqoesUQ/8PiYMYz0qaxwkMTW3sXK07LvD4nfcIL7NHqllveLoe9JWuqpmD3LCWhVX9WRdxdGHutSOwLmlLrU+n7zh8T4mDGM9KmscJDE1t/F869UPc4mVy3NinlObPf+qzXudHN3Vci/EHZ+OdgTOzbn8rXrIGvXA72PCMNajssZBElNzGytHy747LH7HDeLb7JFa1iuOvidtpatq9iAnrFVxVU/WVRx9qEvtCJxb6lLr88kbHu9jwjDWo7LGQRJTcxvPt179MJdYuTwn5jm12fOv2rzXydFdLfdC3PHpaEfg3JzL36qHrFEP/D4mDGM9KmscJDE1t7FytOy7w+J33CC+zR6pZb3i6HvSVrqqZg9ywloVV/VkXcXRh7rUjsC5pS61Pp+84fE+JgxjPSprHCQxNbfxfOvVD3OJlctzYp5Tmz3/qs17nRzd1XIvxB2fjnYEzs25/K16yBr1wO9jwjDWo7LGQRJTcxsrR8u+Oyx+xw3i2+yRWtYrjr4nbaWravYgJ6xVcVVP1lUcfahL7QicW+pS6/PJGx7vY8Iw1qOyxkESU3Mbz7de/TCXWLk8J+Y5tdnzr9q818nRXS33Qtzx6WhH4Nycy9+qh6xRD/w+JgxjPSprHCQxNbexcrTsu8Pid9wgvs0eqWW94uh70la6qmYPcsJaFVf1ZF3F0Ye61I7AuaUutT6fvOHxPiYMYz0qaxwkMTW38Xzr1Q9ziZXLc2KeU5s9/6rNe50c3dVyL8Qdn452BM7Nufytesga9cDvY8Iw1qOyxkESU3MbK0fLvjssfscN4tvskVrWK46+J22lq2r2ICesVXFVT9ZVHH2oS+0InFvqUuvzyRse72PCMNajssZBElNzG8+3Xv0wl1i5PCfmObXZ86/avNfJ0V0t90Lc8eloR+DcnMvfqoesUQ/8PiYMYz0qaxwkMTW3sXK07LvD4nfcIL7NHqllveLoe9JWuqpmD3LCWhVX9WRdxdGHutSOwLmlLrU+n7zh8T4mDGM9KmscJDE1t/F869UPc4mVy3NinlObPf+qzXudHN3Vci/EHZ+OdgTOzbn8rXrIGvXA72PCMNajssZBElNzGytHy747LH7HDeLb7JFa1iuOvidtpatq9iAnrFVxVU/WVRx9qEvtCJxb6lLr88kbHu9jwjDWo7LGQRJTcxvPt179MJdYuTwn5jm12fOv2rzXydFdLfdC3PHpaEfg3JzL36qHrFEP/D4mDGM9KmscJDE1t7FytOy7w+J33CC+zR6pZb3i6HvSVrqqZg9ywloVV/VkXcXRh7rUjsC5pS61Pp+84fE+JgxjPSprHCQxNbfxfOvVD3OJlctzYp5Tmz3/qs17nRzd1XIvxB2fjnYEzs25/K16yBr1wO9jwjDWo7LGQRJTcxsrR8u+Oyx+xw3i2+yRWtYrjr4nbaWravYgJ6xVcVVP1lUcfahL7QicW+pS6/PJGx7vY8Iw1qOyxkESU3Mbz7de/TCXWLk8J+Y5tdnzr9q818nRXS33Qtzx6WhH4Nycy9+qh6xRD/w+JgxjPSprHCQxNbexcrTsu8Pid9wgvs0eqWW94uh70la6qmYPcsJaFVf1ZF3F0Ye61I7AuaUutT6fvOHxPiYMYz0qaxwkMTW38Xzr1Q9ziZXLc2KeU5s9/6rNe50c3dVyL8Qdn452BM7Nufytesga9cDvY8Iw1qOyxkESU3MbK0fLvjssfscN4tvskVrWK46+J22lq2r2ICesVXFVT9ZVHH2oS+0InFvqUuvzyRse72PCMNajssZBElNzG8+3Xv0wl1i5PCfmObXZ86/avNfJ0V0t90Lc8eloR+DcnMvfqoesUQ/8PiYMYz0qaxwkMTW3sXK07LvD4nfcIL7NHqllveLoe9JWuqpmD3LCWhVX9WRdxdGHutSOwLmlLrU+n7zh8T4mDGM9KmscJDE1t/F869UPc4mVy3NinlObPf+qzXudHN3Vci/EHZ+OdgTOzbn8rXrIGvXA72PCMNajssZBElNzGytHy747LH7HDeLb7JFa1iuOvidtpatq9iAnrFVxVU/WVRx9qEvtCJxb6lLr88kbHu9jwjDWo7LGQRJTcxvPt179MJdYuTwn5jm12fOv2rzXydFdLfdC3PHpaEfg3JzL36qHrFEP/D4mDGM9KmscJDE1t7FytOy7w+J33CC+zR6pZb3i6HvSVrqqZg9ywloVV/VkXcXRh7rUjsC5pS61Pp+84fE+JgxjPSprHCQxNbfxfOvVD3OJlctzYp5Tmz3/qs17nRzd1XIvxB2fjnYEzs25/K16yBr1wO9jwjDWo7LGQRJTcxsrR8u+Oyx+xw3i2+yRWtYrjr4nbaWravYgJ6xVcVVP1lUcfahL7QicW+pS6/PJGx7vY8Iw1qOyxkESU3Mbz7de/TCXWLk8J+Y5tdnzr9q818nRXS33Qtzx6WhH4Nycy9+qh6xRD/w+JgxjPSprHCQxNbexcrTsu8Pid9wgvs0eqWW94uh70la6qmYPcsJaFVf1ZF3F0Ye61I7AuaUutT6fvOHxPiYMYz0qaxwkMTW38Xzr1Q9ziZXLc2KeU5s9/6rNe50c3dVyL8Qdn452BM7Nufytesga9cDvY8Iw1qOyxkESU3MbK0fLvjssfscN4tvskVrWK46+J22lq2r2ICesVXFVT9ZVHH2oS+0InFvqUuvzyRse72PCMNajssZBElNzG8+3Xv0wl1i5PCfmObXZ86/avNfJ0V0t90Lc8eloR+DcnMvfqoesUQ/8PiYMYz0qaxwkMTW3sXK07LvD4nfcIL7NHqllveLoe9JWuqpmD3LCWhVX9WRdxdGHutSOwLmlLrU+n7zh8T4mDGM9KmscJDE1t/F869UPc4mVy3NinlObPf+qzXudHN3Vci/EHZ+OdgTOzbn8rXrIGvXA72PCMNajssZBElNzGytHy747LH7HDeLb7JFa1iuOvidtpatq9iAnrFVxVU/WVRx9qEvtCJxb6lLr88kbHu9jwjDWo7LGQRJTcxvPt179MJdYuTwn5jm12fOv2rzXydFdLfdC3PHpaEfg3JzL36qHrFEP/D4mDGM9KmscJDE1t7FytOy7w+J33CC+zR6pZb3i6HvSVrqqZg9ywloVV/VkXcXRh7rUjsC5pS61Pp+84fE+JgxjPSprHCQxNbfxfOvVD3OJlctzYp5Tmz3/qs17nRzd1XIvxB2fjnYEzs25/K16yBr1wO9jwjDWo7LGQRJTcxsrR8u+Oyx+xw3i2+yRWtYrjr4nbaWravYgJ6xVcVVP1lUcfahL7QicW+pS6/PJGx7vY8Iw1qOyxkESU3Mbz7de/TCXWLk8J+Y5tdnzr9q818nRXS33Qtzx6WhH4Nycy9+qh6xRD/w+JgxjPSprHCQxNbexcrTsu8Pid9wgvs0eqWW94uh70la6qmYPcsJaFVf1ZF3F0Ye61I7AuaUutT6fvOHxPiYMYz0qaxwkMTW38Xzr1Q9ziZXLc2KeU5s9/6rNe50c3dVyL8Qdn452BM7Nufytesga9cDvY8Iw1qOyxkESU3MbK0fLvjssfscN4tvskVrWK46+J22lq2r2ICesVXFVT9ZVHH2oS+0InFvqUuvzyRse72PCMNajssZBElNzG8+3Xv0wl1i5PCfmObXZ86/avNfJ0V0t90Lc8eloR+DcnMvfqoesUQ/8PiYMYz0qaxwkMTW3sXK07LvD4nfcIL7NHqllveLoe9JWuqpmD3LCWhVX9WRdxdGHutSOwLmlLrU+n7zh8T4mDGM9KmscJDE1t/F869UPc4mVy3NinlObPf+qzXudHN3Vci/EHZ+OdgTOzbn8rXrIGvXA72PCMNajssZBElNzGytHy747LH7HDeLb7JFa1iuOvidtpatq9iAnrFVxVU/WVRx9qEvtCJxb6lLr88kbHu9jwjDWo7LGQRJTcxvPt179MJdYuTwn5jm12fOv2rzXydFdLfdC3PHpaEfg3JzL36qHrFEP/D4mDGM9KmscJDE1t7FytOy7w+J33CC+zR6pZb3i6HvSVrqqZg9ywloVV/VkXcXRh7rUjsC5pS61Pp+84fE+JgxjPSprHCQxNbfxfOvVD3OJlctzYp5Tmz3/qs17nRzd1XIvxB2fjnYEzs25/K16yBr1wO9jwjDWo7LGQRJTcxsrR8u+Oyx+xw3i2+yRWtYrjr4nbaWravYgJ6xVcVVP1lUcfahL7QicW+pS6/PJGx7vY8Iw1qOyxkESU3Mbz7de/TCXWLk8J+Y5tdnzr9q818nRXS33Qtzx6WhH4Nycy9+qh6xRD/w+JgxjPSprHCQxNbexcrTsu8Pid9wgvs0eqWW94uh70la6qmYPcsJaFVf1ZF3F0Ye61I7AuaUutT6fvOHxPiYMYz0qaxwkMTW38Xzr1Q9ziZXLc2KeU5s9/6rNe50c3dVyL8Qdn452BM7Nufytesga9cDvY8Iw1qOyxkESU3MbK0fLvjssfscN4tvskVrWK46+J22lq2r2ICesVXFVT9ZVHH2oS+0InFvqUuvzyRse72PCMNajssZBElNzG8+3Xv0wl1i5PCfmObXZ86/avNfJ0V0t90Lc8eloR+DcnMvfqoesUQ/8PiYMYz0qaxwkMTW3sXK07LvD4nfcIL7NHqllveLoe9JWuqpmD3LCWhVX9WRdxdGHutSOwLmlLrU+n7zh8T4mDGM9KmscJDE1t/F869UPc4mVy3NinlObPf+qzXudHN3Vci/EHZ+OdgTOzbn8rXrIGvXA72PCMNajssZBElNzGytHy747LH7HDeLb7JFa1iuOvidtpatq9iAnrFVxVU/WVRx9qEvtCJxb6lLr88kbHu9jwjDWo7LGQRJTcxvPt179MJdYuTwn5jm12fOv2rzXydFdLfdC3PHpaEfg3JzL36qHrFEP/D4mDGM9KmscJDE1t7FytOy7w+J33CC+zR6pZb3i6HvSVrqqZg9ywloVV/VkXcXRh7rUjsC5pS61Pp+84fE+JgxjPSprHCQxNbfxfOvVD3OJlctzYp5Tmz3/qs17nRzd1XIvxB2fjnYEzs25/K16yBr1wO9jwjDWo7LGQRJTcxsrR8u+Oyx+xw3i2+yRWtYrjr4nbaWravYgJ6xVcVVP1lUcfahL7QicW+pS6/PJGx7vY8Iw1qOyxkESU3Mbz7de/TCXWLk8J+Y5tdnzr9q818nRXS33Qtzx6WhH4Nycy9+qh6xRD/w+JgxjPSprHCQxNbexcrTsu8Pid9wgvs0eqWW94uh70la6qmYPcsJaFVf1ZF3F0Ye61I7AuaUutT6fvOHxPiYMYz0qaxwkMTW38Xzr1Q9ziZXLc2KeU5s9/6rNe50c3dVyL8Qdn452BM7Nufytesga9cb/AbiQiZyAnsr3AAAAAElFTkSuQmCC"];
}

- (void)testComplexGS1CompactRendering
{
    // Same data as above, but re-ordered to make it more compact: [FNC1] 11 090101 17 100101 21 12345
    const char patterns[] = {2,1,1,2,3,2,4,1,1,1,3,1,2,3,1,2,1,2,2,2,1,2,1,3,2,2,2,1,2,2,2,2,2,1,2,2,1,2,3,2,2,1,2,2,1,3,1,2,2,2,2,1,2,2,2,2,2,1,2,2,2,1,3,2,1,2,1,1,2,2,3,2,1,3,1,1,2,3,1,1,4,1,3,1,2,1,3,2,1,2,1,2,3,2,2,1,2,3,3,1,1,1,2};
    NSString *fnc1 = [NSString stringWithCString:"\xf1" encoding:NSISOLatin1StringEncoding];
    [self commonTestRenderingWithPayload:[fnc1 stringByAppendingString:@"11090101171001012112345"]
                                patterns:patterns
                                   count:sizeof(patterns)
                               base64PNG:@"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"];
}

@end
